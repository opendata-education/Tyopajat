
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Julkisista rahoista ja kunnallistaloudesta &#8212; Työpajat</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'harjoitukset/Julkistalous';</script>
    <link rel="canonical" href="https://opendata-education.github.io/Tyopajat/intro.html/harjoitukset/Julkistalous.html" />
    <link rel="icon" href="../_static/logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ilmastotyöpaja" href="ilmastopaja.html" />
    <link rel="prev" title="Liiketoiminnan tunnusluvuista" href="Talous.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Työpajat - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Työpajat - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Tervetuloa avoimen datan pariin
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="opettajakoulutus.html">CERN Opettajakoulutus</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="mika-on-jupyter-notebook.html">Mikä on Jupyter Notebook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="cms-esimerkki.html">CMS ja avoin data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Vuosirenkaat.html">Niin hyvää puuta</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="esimerkit.html">Lyhyet esimerkit</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Lumensyvyys.html">ESIMERKKI: Lumensyvyys</a></li>
<li class="toctree-l2"><a class="reference internal" href="UV.html">ESIMERKKI: Ultraviolettisäteily</a></li>
<li class="toctree-l2"><a class="reference internal" href="fossiiliset_ja_koulutus.html">Luonnonvarojen käyttö ja tasa-arvoinen koulutus</a></li>
<li class="toctree-l2"><a class="reference internal" href="Terveystieto.html"><u>Terveysongelmien jakautuminen muuttuvassa maailmassa</u></a></li>

<li class="toctree-l2"><a class="reference internal" href="Lampoanomaliat.html">ESIMERKKI: Lämpötiloista ja anomalioista</a></li>
<li class="toctree-l2"><a class="reference internal" href="FMI_Luotaukset.html">ESIMERKKI: Ilmakehäluotaukset</a></li>
<li class="toctree-l2"><a class="reference internal" href="Talous.html">Liiketoiminnan tunnusluvuista</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#"><u>Julkisista rahoista ja kunnallistaloudesta</u></a></li>

</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="ilmastopaja.html">Ilmastotyöpaja</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lampotila-intro.html">ESIMERKKI 1: Maan lämpötilapoikkeaman määritys</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataraati.html">Visualisaatioraati</a></li>
<li class="toctree-l2"><a class="reference internal" href="UV-paja.html">ESIMERKKI 2: Ultraviolettisäteily</a></li>
<li class="toctree-l2"><a class="reference internal" href="co2.html">ESIMERKKI 3: Maapallon ilmakehä</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pienhiukkaset.html">ESIMERKKI 4: Pienhiukkaset - saasteita ja aerosoleja</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="aerosoli.html">Aerosoli-työpaja</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="aerosoli-tyopaja.html">Aerosoli-työpajan ohjeet</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasettien_esittelyt.html">Aerosoli-työpajan datasetit ja tutkimuskysymykset</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="kestavyys.html">Kestävyyskurssille</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="ICOSdemo.html">Informaatiota ilmakehästä</a></li>
<li class="toctree-l2"><a class="reference internal" href="KestavyysHarjoitus.html"><ins> KESTÄVYYS - fysikaalisia pohdintoja ilmakehästämme </ins></a></li>
<li class="toctree-l2"><a class="reference internal" href="SustainabilityEnglish.html"><ins> SUSTAINABILITY - physical musings on the atmosphere </ins></a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/opendata-education/Tyopajat/main?urlpath=tree/materiaali/harjoitukset/Julkistalous.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/opendata-education/Tyopajat/blob/main/materiaali/harjoitukset/Julkistalous.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/opendata-education/Tyopajat" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/opendata-education/Tyopajat/issues/new?title=Issue%20on%20page%20%2Fharjoitukset/Julkistalous.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/harjoitukset/Julkistalous.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1><u>Julkisista rahoista ja kunnallistaloudesta</u></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"><u>Julkisista rahoista ja kunnallistaloudesta</u></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#avoindata-fi">Avoindata.fi</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tutkihallintoa-fi">Tutkihallintoa.fi</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tutkihankintoja-fi">Tutkihankintoja.fi</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tyokalut">1. Työkalut</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aineisto-janakkalan-kunta">2. Aineisto - Janakkalan kunta</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analyysia">3. Analyysiä</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#aineisto-kokkolan-kaupunki">3. Aineisto - Kokkolan kaupunki</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="julkisista-rahoista-ja-kunnallistaloudesta">
<h1><u>Julkisista rahoista ja kunnallistaloudesta</u><a class="headerlink" href="#julkisista-rahoista-ja-kunnallistaloudesta" title="Link to this heading">#</a></h1>
<p>Elämme yhteiskunnassa, jonka pyörittämiseksi itse kukin maksaa veroja ja jonka osasina valtio ja kunnat sijoittavat varallisuuttaan erilaisiin kohteisiin. Mutta millaisista rahoista näissä tilanteissa oikeastaan puhutaan?</p>
<p>Alla on vinkkejä muutamille suomalaisille sivustoille jotka avaavat aihetta sekä esimerkkivilkaisu tarjolla olevaan aineistoon. Valtiovarainministeriön puollon avoimuudelle voi löytää täältä: <a class="reference external" href="https://vm.fi/avoin-tieto">https://vm.fi/avoin-tieto</a>.</p>
<hr class="docutils" />
<section id="avoindata-fi">
<h2>Avoindata.fi<a class="headerlink" href="#avoindata-fi" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="http://www.avoindata.fi/">http://www.avoindata.fi/</a> on valtiollisen DVV:n eli Digi- ja väestötietoviraston ylläpitämä portaali, jonne niin kunnat kuin erilaiset organisaatiotkin julkaisevat omia aineistojaan kansalaisten käytettäväksi. Kohta käsittelemämme Janakkalan ostolaskutiedot on ladattu täältä.</p>
</section>
<section id="tutkihallintoa-fi">
<h2>Tutkihallintoa.fi<a class="headerlink" href="#tutkihallintoa-fi" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://www.tutkihallintoa.fi">https://www.tutkihallintoa.fi</a> tarjoaa kattavan katsauksen Suomen valtion varainkäyttöön. Erityisesti sen tarjoamat visualisaatiot valtion vuosittaisesta tilinpäätöksestä ovat hyvä yleiskuva erilaisen poliittisen keskustelun seuraamiseen <a class="reference external" href="https://www.tutkihallintoa.fi/valtio/taloustiedot/valtion-tilinpaatos/">https://www.tutkihallintoa.fi/valtio/taloustiedot/valtion-tilinpaatos/</a>.</p>
</section>
<section id="tutkihankintoja-fi">
<h2>Tutkihankintoja.fi<a class="headerlink" href="#tutkihankintoja-fi" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://tutkihankintoja.fi/">https://tutkihankintoja.fi/</a> on valtiollisen julkishankintayksikön Hanselin ylläpitämä sivusto, joka hyödyntää muun muassa Avoindata.fi -portaalista saatavaa informaatiota tiivistääkseen erilaisten suurten yhteishankkeiden tilanteen niin päätöksenteon helpottamiseksi kuin kansalaisyhteiskunnan vastuullisuuden edistämiseksikin.</p>
<hr class="docutils" />
<p>Tehdääs itsekin!</p>
</section>
<section id="tyokalut">
<h2>1. Työkalut<a class="headerlink" href="#tyokalut" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Aja tämä solu ensin.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="aineisto-janakkalan-kunta">
<h2>2. Aineisto - Janakkalan kunta<a class="headerlink" href="#aineisto-janakkalan-kunta" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Käytetty aineisto on haettu täältä</span>
<span class="c1"># https://www.avoindata.fi/data/fi/dataset/janakkalan-kunnan-ostolaskudata-2022</span>

<span class="c1"># Tiedosto oli merkistöltään hassu ja eroteltu puolipisteellä, joten korjataan asia parilla parametrilla.</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;Janakkala_ostolaskut_2022.csv&quot;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;iso8859_10&quot;</span><span class="p">,</span> <span class="n">decimal</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">5</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Käytetty aineisto on haettu täältä</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="c1"># https://www.avoindata.fi/data/fi/dataset/janakkalan-kunnan-ostolaskudata-2022</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> 
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># Tiedosto oli merkistöltään hassu ja eroteltu puolipisteellä, joten korjataan asia parilla parametrilla.</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;Janakkala_ostolaskut_2022.csv&quot;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;iso8859_10&quot;</span><span class="p">,</span> <span class="n">decimal</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/pandas/io/parsers/readers.py:1026,</span> in <span class="ni">read_csv</span><span class="nt">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, date_format, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options, dtype_backend)</span>
<span class="g g-Whitespace">   </span><span class="mi">1013</span> <span class="n">kwds_defaults</span> <span class="o">=</span> <span class="n">_refine_defaults_read</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1014</span>     <span class="n">dialect</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1015</span>     <span class="n">delimiter</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>   <span class="mi">1022</span>     <span class="n">dtype_backend</span><span class="o">=</span><span class="n">dtype_backend</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1023</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1024</span> <span class="n">kwds</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwds_defaults</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1026</span> <span class="k">return</span> <span class="n">_read</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/pandas/io/parsers/readers.py:620,</span> in <span class="ni">_read</span><span class="nt">(filepath_or_buffer, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">617</span> <span class="n">_validate_names</span><span class="p">(</span><span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;names&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="g g-Whitespace">    </span><span class="mi">619</span> <span class="c1"># Create the parser.</span>
<span class="ne">--&gt; </span><span class="mi">620</span> <span class="n">parser</span> <span class="o">=</span> <span class="n">TextFileReader</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">622</span> <span class="k">if</span> <span class="n">chunksize</span> <span class="ow">or</span> <span class="n">iterator</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">623</span>     <span class="k">return</span> <span class="n">parser</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/pandas/io/parsers/readers.py:1620,</span> in <span class="ni">TextFileReader.__init__</span><span class="nt">(self, f, engine, **kwds)</span>
<span class="g g-Whitespace">   </span><span class="mi">1617</span>     <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">1619</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span><span class="p">:</span> <span class="n">IOHandles</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="ne">-&gt; </span><span class="mi">1620</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_engine</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/pandas/io/parsers/readers.py:1880,</span> in <span class="ni">TextFileReader._make_engine</span><span class="nt">(self, f, engine)</span>
<span class="g g-Whitespace">   </span><span class="mi">1878</span>     <span class="k">if</span> <span class="s2">&quot;b&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mode</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1879</span>         <span class="n">mode</span> <span class="o">+=</span> <span class="s2">&quot;b&quot;</span>
<span class="ne">-&gt; </span><span class="mi">1880</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="o">=</span> <span class="n">get_handle</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1881</span>     <span class="n">f</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1882</span>     <span class="n">mode</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1883</span>     <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;encoding&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1884</span>     <span class="n">compression</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;compression&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1885</span>     <span class="n">memory_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;memory_map&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1886</span>     <span class="n">is_text</span><span class="o">=</span><span class="n">is_text</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1887</span>     <span class="n">errors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;encoding_errors&quot;</span><span class="p">,</span> <span class="s2">&quot;strict&quot;</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1888</span>     <span class="n">storage_options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;storage_options&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1889</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1890</span> <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="g g-Whitespace">   </span><span class="mi">1891</span> <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span><span class="o">.</span><span class="n">handle</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/pandas/io/common.py:873,</span> in <span class="ni">get_handle</span><span class="nt">(path_or_buf, mode, encoding, compression, memory_map, is_text, errors, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">868</span> <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">869</span>     <span class="c1"># Check whether the filename is to be opened in binary mode.</span>
<span class="g g-Whitespace">    </span><span class="mi">870</span>     <span class="c1"># Binary mode does not support &#39;encoding&#39; and &#39;newline&#39;.</span>
<span class="g g-Whitespace">    </span><span class="mi">871</span>     <span class="k">if</span> <span class="n">ioargs</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">and</span> <span class="s2">&quot;b&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ioargs</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">872</span>         <span class="c1"># Encoding</span>
<span class="ne">--&gt; </span><span class="mi">873</span>         <span class="n">handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">874</span>             <span class="n">handle</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">875</span>             <span class="n">ioargs</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">876</span>             <span class="n">encoding</span><span class="o">=</span><span class="n">ioargs</span><span class="o">.</span><span class="n">encoding</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">877</span>             <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">878</span>             <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">879</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">880</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">881</span>         <span class="c1"># Binary mode</span>
<span class="g g-Whitespace">    </span><span class="mi">882</span>         <span class="n">handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">ioargs</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;Janakkala_ostolaskut_2022.csv&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">data</span>

<span class="ne">NameError</span>: name &#39;data&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Huomaamme heti, että vuonna 2022 Janakkalan kunnan julkaistuissa ostolaskuissa on yli 42 000 tapahtumaa, joiden euromäärät heiluvat joulukuisesta parin euron sähkölaskusta useisiin tuhansiin. Jos etsimme, löydämme varmasti isompiakin eriä. Joten etsitään siis!</p>
</section>
<section id="analyysia">
<h2>3. Analyysiä<a class="headerlink" href="#analyysia" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tarkastellaan ensin paljonko vuoden summa on ollut.</span>
<span class="n">kirjat</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Summa kirjanpidon valuuttana&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Yhteensä summasarakkeessa on </span><span class="si">{</span><span class="n">kirjat</span><span class="si">}</span><span class="s2"> euroa.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Tarkastellaan ensin paljonko vuoden summa on ollut.</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">kirjat</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Summa kirjanpidon valuuttana&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Yhteensä summasarakkeessa on </span><span class="si">{</span><span class="n">kirjat</span><span class="si">}</span><span class="s2"> euroa.&quot;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;data&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>No sehän on melkoinen potti. Jos katsomme Janakkalan kunnan verkkosivuille <a class="reference external" href="https://www.janakkala.fi/kunta-ja-paatoksenteko/hallinto-ja-talous/talous/">https://www.janakkala.fi/kunta-ja-paatoksenteko/hallinto-ja-talous/talous/</a>, löydämme sieltä varsinaiset tilinpäätökset vertailtaviksi. Mutta ihan peukalotuntumallakin voimme verrata äskeisten miljoonien määrää vuoden 2023 infografiikkaan: <img alt="" src="https://www.janakkala.fi/wp-content/uploads/2024/03/tilinpaatos2023netti_paivitetty.jpg" /></p>
<p>Tuntuuko summa realistiselta?</p>
<p>Vilkaistaanpa sarakkeen tarkempaan sisältöön.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Etsitään kallein yksittäinen ostos.</span>
<span class="n">kallein</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Summa kirjanpidon valuuttana&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Kallein ostos oli </span><span class="si">{</span><span class="n">kallein</span><span class="si">}</span><span class="s2"> euroa.&quot;</span><span class="p">)</span>

<span class="c1"># Millä rivillä se on?</span>
<span class="n">paikka</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Summa kirjanpidon valuuttana&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sen rivi-indeksi on numero </span><span class="si">{</span><span class="n">paikka</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

<span class="c1"># Kuka se oli?</span>
<span class="n">kohde</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">paikka</span><span class="p">][</span><span class="s2">&quot;Toimittajan nimi&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sen toimittaja oli siis </span><span class="si">{</span><span class="n">kohde</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

<span class="c1"># Milloin se tapahtui?</span>
<span class="n">aika</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">paikka</span><span class="p">][</span><span class="s2">&quot;Kirjauspäivämäärä&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tapahtuma on kirjattu päivämäärälle </span><span class="si">{</span><span class="n">aika</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

<span class="c1"># Millaisesta osa-alueesta oli kyse?</span>
<span class="n">ala</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">paikka</span><span class="p">][</span><span class="s2">&quot;Kustannuspaikan nimi&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Osto on rekisteröity kategoriaan &#39;</span><span class="si">{</span><span class="n">ala</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Etsitään kallein yksittäinen ostos.</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">kallein</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Summa kirjanpidon valuuttana&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Kallein ostos oli </span><span class="si">{</span><span class="n">kallein</span><span class="si">}</span><span class="s2"> euroa.&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="c1"># Millä rivillä se on?</span>

<span class="ne">NameError</span>: name &#39;data&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Sellaista salapoliisintyötä. Voisimme myös halutessamme jaotella aineistoa jonkin teeman mukaan, laskea niistä osasummia tai keskimääräisiä arvoja. Itseasiassa, paljonkohan keskimääräinen ostos on ollut?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Otetaas keskiarvoja.</span>
<span class="n">KA</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Summa kirjanpidon valuuttana&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Keskiarvo kaikkien ostosten välillä on ollut noin </span><span class="si">{</span><span class="n">KA</span><span class="si">}</span><span class="s2"> euroa.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Otetaas keskiarvoja.</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">KA</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Summa kirjanpidon valuuttana&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Keskiarvo kaikkien ostosten välillä on ollut noin </span><span class="si">{</span><span class="n">KA</span><span class="si">}</span><span class="s2"> euroa.&quot;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;data&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Keskimääräinen ostos on siis toista tonnia osan huidellessa miljoonissa. Mutta kuinka kuvaava tavallinen keskiarvo on? Jos jaottelisimme aineiston sen mukaan, miten suuri osuus lopulta jäisi tuon rajan yläpuolelle?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Katsotaas millainen jakauma ostoksissa on.</span>

<span class="n">pienet</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;`Summa kirjanpidon valuuttana` &lt;= @KA&quot;</span><span class="p">)</span>
<span class="n">isot</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;`Summa kirjanpidon valuuttana` &gt; @KA&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Koko aineistossa on </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> ostosta. Niistä </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">pienet</span><span class="p">)</span><span class="si">}</span><span class="s2"> jää alle keskiarvon </span><span class="si">{</span><span class="n">KA</span><span class="si">}</span><span class="s2"> € ja </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">isot</span><span class="p">)</span><span class="si">}</span><span class="s2"> ylittää sen.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Täten keskiarvon suhdeluku ei tosiaankaan ole noin puolet ja puolet, vaan isompia on </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">isot</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">pienet</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Katsotaas millainen jakauma ostoksissa on.</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">pienet</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;`Summa kirjanpidon valuuttana` &lt;= @KA&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">isot</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;`Summa kirjanpidon valuuttana` &gt; @KA&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Koko aineistossa on </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> ostosta. Niistä </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">pienet</span><span class="p">)</span><span class="si">}</span><span class="s2"> jää alle keskiarvon </span><span class="si">{</span><span class="n">KA</span><span class="si">}</span><span class="s2"> € ja </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">isot</span><span class="p">)</span><span class="si">}</span><span class="s2"> ylittää sen.&quot;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;data&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="aineisto-kokkolan-kaupunki">
<h1>3. Aineisto - Kokkolan kaupunki<a class="headerlink" href="#aineisto-kokkolan-kaupunki" title="Link to this heading">#</a></h1>
<p>Mutta hei, vaikka avoindata.fi -portista ei Kokkolaa vielä löydykään, kaupunki itse tarjoaa omilla sivuillaan <a class="reference external" href="https://www.kokkola.fi/hallinto-ja-paatoksenteko/talous/">https://www.kokkola.fi/hallinto-ja-paatoksenteko/talous/</a> vastaavaa aineistoa tarkasteltavaksi. Käytäntö on alkanut vuodesta 2022.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Jotkut Pythonin versiot eivät oletusarvoisesti tue pandaksen kautta Excel-tiedostojen lukemista. Alla oleva käsky auttaa virhetilanteessa.</span>
<span class="o">%</span><span class="k">pip</span> install openpyxl
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting openpyxl
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Downloading openpyxl-3.1.5-py2.py3-none-any.whl.metadata (2.5 kB)
Collecting et-xmlfile (from openpyxl)
  Downloading et_xmlfile-2.0.0-py3-none-any.whl.metadata (2.7 kB)
Downloading openpyxl-3.1.5-py2.py3-none-any.whl (250 kB)
Downloading et_xmlfile-2.0.0-py3-none-any.whl (18 kB)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Installing collected packages: et-xmlfile, openpyxl
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Successfully installed et-xmlfile-2.0.0 openpyxl-3.1.5
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Haetaan aineisto suoraan kaupungin sivuilta.</span>
<span class="n">kokkola</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;https://www.kokkola.fi/app/uploads/2024/06/9c81b62f-ostolaskudata-2023-kokkola.xlsx&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kokkola</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Kuntanumero</th>
      <th>Kunta</th>
      <th>Y-tunnus</th>
      <th>Tili</th>
      <th>Tili(T)</th>
      <th>Tapahtumanumero</th>
      <th>Reskontranro</th>
      <th>Reskontranro(T)</th>
      <th>Y-tunnus.1</th>
      <th>Maatunnus</th>
      <th>Jakso</th>
      <th>Summa</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>1808.0</td>
      <td>PALAUTUSKELPOISET</td>
      <td>200487391.0</td>
      <td>220832.0</td>
      <td>Rauta Juhinna Oy</td>
      <td>3254973-5</td>
      <td>FI</td>
      <td>202301.0</td>
      <td>8.86</td>
    </tr>
    <tr>
      <th>1</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>4590.0</td>
      <td>RAKENNUSMATERIAALI</td>
      <td>200487391.0</td>
      <td>220832.0</td>
      <td>Rauta Juhinna Oy</td>
      <td>3254973-5</td>
      <td>FI</td>
      <td>202301.0</td>
      <td>36.91</td>
    </tr>
    <tr>
      <th>2</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>1808.0</td>
      <td>PALAUTUSKELPOISET</td>
      <td>200488215.0</td>
      <td>200705.0</td>
      <td>Kokkolan Teollisuuskylä Oy</td>
      <td>0179213-4</td>
      <td>FI</td>
      <td>202301.0</td>
      <td>21.60</td>
    </tr>
    <tr>
      <th>3</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>4860.0</td>
      <td>MUUT VUOKRAT</td>
      <td>200488215.0</td>
      <td>200705.0</td>
      <td>Kokkolan Teollisuuskylä Oy</td>
      <td>0179213-4</td>
      <td>FI</td>
      <td>202301.0</td>
      <td>90.00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>1808.0</td>
      <td>PALAUTUSKELPOISET</td>
      <td>200488216.0</td>
      <td>200705.0</td>
      <td>Kokkolan Teollisuuskylä Oy</td>
      <td>0179213-4</td>
      <td>FI</td>
      <td>202301.0</td>
      <td>245.96</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>141104</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>1808.0</td>
      <td>PALAUTUSKELPOISET</td>
      <td>200549668.0</td>
      <td>201607.0</td>
      <td>Rakennusliike Antti Salonen Oy</td>
      <td>1891434-5</td>
      <td>FI</td>
      <td>202312.0</td>
      <td>1444.96</td>
    </tr>
    <tr>
      <th>141105</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>4320.0</td>
      <td>URAKAT/INVESTOINNIT</td>
      <td>200549668.0</td>
      <td>201607.0</td>
      <td>Rakennusliike Antti Salonen Oy</td>
      <td>1891434-5</td>
      <td>FI</td>
      <td>202312.0</td>
      <td>6020.66</td>
    </tr>
    <tr>
      <th>141106</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>1808.0</td>
      <td>PALAUTUSKELPOISET</td>
      <td>200549883.0</td>
      <td>200028.0</td>
      <td>Hartman Rauta Oy</td>
      <td>0628046-1</td>
      <td>FI</td>
      <td>202312.0</td>
      <td>-344.40</td>
    </tr>
    <tr>
      <th>141107</th>
      <td>272.0</td>
      <td>Kokkola</td>
      <td>0179377-8</td>
      <td>4590.0</td>
      <td>RAKENNUSMATERIAALI</td>
      <td>200549883.0</td>
      <td>200028.0</td>
      <td>Hartman Rauta Oy</td>
      <td>0628046-1</td>
      <td>FI</td>
      <td>202312.0</td>
      <td>-1435.00</td>
    </tr>
    <tr>
      <th>141108</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
<p>141109 rows × 12 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vilkaistaas samalla tavalla Kokkolankin aineistoon.</span>

<span class="c1"># Etsitään kallein yksittäinen ostos.</span>
<span class="n">kallein</span> <span class="o">=</span> <span class="n">kokkola</span><span class="p">[</span><span class="s2">&quot;Summa&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Kallein ostos oli </span><span class="si">{</span><span class="n">kallein</span><span class="si">}</span><span class="s2"> euroa.&quot;</span><span class="p">)</span>

<span class="c1"># Millä rivillä se on?</span>
<span class="n">paikka</span> <span class="o">=</span> <span class="n">kokkola</span><span class="p">[</span><span class="s2">&quot;Summa&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sen rivi-indeksi on numero </span><span class="si">{</span><span class="n">paikka</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

<span class="c1"># Kuka se oli?</span>
<span class="n">kohde</span> <span class="o">=</span> <span class="n">kokkola</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">paikka</span><span class="p">][</span><span class="s2">&quot;Reskontranro(T)&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sen toimittaja oli siis </span><span class="si">{</span><span class="n">kohde</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

<span class="c1"># Milloin se tapahtui?</span>
<span class="n">aika</span> <span class="o">=</span> <span class="n">kokkola</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">paikka</span><span class="p">][</span><span class="s2">&quot;Jakso&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tapahtuma on kirjattu kuukaudelle </span><span class="si">{</span><span class="n">aika</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

<span class="c1"># Millaisesta osa-alueesta oli kyse?</span>
<span class="n">ala</span> <span class="o">=</span> <span class="n">kokkola</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">paikka</span><span class="p">][</span><span class="s2">&quot;Tili(T)&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Osto on rekisteröity kategoriaan &#39;</span><span class="si">{</span><span class="n">ala</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kallein ostos oli 8910000.0 euroa.
Sen rivi-indeksi on numero 28017.
Sen toimittaja oli siis Kuntarahoitus Oyj.
Tapahtuma on kirjattu kuukaudelle 202304.0.
Osto on rekisteröity kategoriaan &#39;KUNTARAHOITUS OY:LTÄ&#39;.
</pre></div>
</div>
</div>
</div>
<p>Siinähän on jo heti muutama milli kiinni.</p>
<p>Selvitäpä seuraavaksi itse paljonko ostoja tehtiin kokonaisuudessaa?</p>
<p>Paljonko ostoja tehtiin eri kuukausina?</p>
<p>Mikä kuukausi oli aktiivisin?</p>
<p>Miten suuri osuus ostoista liittyy vuokriin tai muihin aineettomiin ostoihin verrattuna esineiden liikutteluun?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Koodaile tänne!</span>
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./harjoitukset"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Talous.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Liiketoiminnan tunnusluvuista</p>
      </div>
    </a>
    <a class="right-next"
       href="ilmastopaja.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Ilmastotyöpaja</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"><u>Julkisista rahoista ja kunnallistaloudesta</u></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#avoindata-fi">Avoindata.fi</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tutkihallintoa-fi">Tutkihallintoa.fi</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tutkihankintoja-fi">Tutkihankintoja.fi</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tyokalut">1. Työkalut</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aineisto-janakkalan-kunta">2. Aineisto - Janakkalan kunta</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analyysia">3. Analyysiä</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#aineisto-kokkolan-kaupunki">3. Aineisto - Kokkolan kaupunki</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By HIP Education and Open Data Team
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>
<a>Toteutettu Opetushallituksen valtionavustuksella tiedekasvatuksen edistämiseen.</a></br><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="license" alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> Tämän sivuston materiaali on käytettävissä seuraavalla lisenssillä: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY 4.0.</a>
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>